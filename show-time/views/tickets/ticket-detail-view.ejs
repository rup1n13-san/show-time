<script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.js"></script>
<body>
  <div class="relative mt-10 w-full max-w-xl h-[450px] sm:h-[350px] bg-white text-gray-800 rounded-2xl shadow-2xl mx-auto overflow-hidden">
    
    <div class="absolute inset-0 flex">
      <div class="w-full sm:w-8/12 p-6 sm:p-8 bg-orange-600 text-white flex flex-col justify-between">
        
        <div>
          <img src="<%= event.imageUrls && event.imageUrls.length > 0 ? event.imageUrls[0] : '/assets/images/default-event.jpg' %>" alt="Event Image" class="w-full h-32 object-cover rounded-lg mb-4 shadow-md">
          <h1 class="text-2xl font-extrabold leading-tight">
            <%= event.title %>
          </h1>
          <p class="mt-2 text-sm opacity-90 flex flex-row ">
            <span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
  <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z" />
</svg>
</span><span class="font-semibold pl-2"><%= event.startDate.toDateString() %></span> to <span class="font-semibold"><%= event.endDate.toDateString() %></span>
          </p>
          <div class="flex items-center gap-2 mt-2">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z" />
            </svg>
            <span class="text-sm font-medium"><%= event.location %></span>
          </div>
          <div class="mt-2 flex flex-row mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
    <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z" />
  </svg> <p class="text-xl font-bold pl-2"><%= event.price %> FCFA</p>
        </div>

            <!-- <span class="text-xs opacity-80">Price :</span> -->
        </div>
      </div>

      <div class="hidden sm:block w-4/12 p-4 bg-orange-700 text-white relative ticket-divider">
          
          <div class="absolute inset-y-0 left-0">
            <div class="w-4 h-4 bg-white rounded-full absolute -top-2 -left-2"></div>
            <div class="w-4 h-4 bg-white rounded-full absolute -bottom-2 -left-2"></div>
          </div>
          
          <div class="flex flex-col h-full justify-between items-center text-center">
              
              <div class="mt-4">
                  <span class="text-xs opacity-70 block">Ticket for :</span>
                  <h3 class="text-lg font-semibold leading-tight"><%= user.username %></h3>
                  <p class="text-xs opacity-70"><%= user.email %></p>
              </div>

              <div id="qrcode" class="my-4 p-1 bg-white rounded-md shadow-inner"></div>

              <div>
                  <span class="text-xs opacity-70 block">Ref:</span>
                  <p class="text-sm font-mono tracking-widest"><%= ticket.id.substring(0,8) %></p>
                  <span class="text-xs opacity-70 block mt-2">Sold at:</span>
                  <p class="text-xs"><%= ticket.purchasedAt.toDateString() %></p>
              </div>
          </div>
      </div>
      
      <div class="sm:hidden absolute bottom-0 w-full p-4 bg-orange-700 text-white border-t border-dashed border-orange-500">
        <div class="flex justify-between items-center">
            <div>
                <span class="text-xs opacity-70 block">Ticket for:</span>
                <h3 class="text-lg font-semibold"><%= user.username %></h3>
                <p class="text-sm opacity-70"><%= user.email %></p>
            </div>
             <div class="text-right">
                <span class="text-xs opacity-70 block">Ref:</span>
                <p class="text-sm font-mono tracking-widest"><%= ticket.id.substring(0,8) %></p>
            </div>
        </div>
      </div>
      
    </div>
  </div>
  <div class="flex mx-auto w-full justify-center mt-8">
    <a href="/users/<%=ticket.userId%>/dashuser"
       class=" inline-flex items-center gap-2 px-8 py-3 bg-orange-600 hover:bg-orange-700 text-white font-semibold rounded-lg transition">
      View all tickets â†’
    </a>
  </div>

</body>
<script>
  const qrText = '<%=ticket.qrCodeLink%>'; 
  if (qrText) { 
    new QRCode(document.getElementById('qrcode'), {
      text: qrText,
      width: 80,
      height: 80,
      colorDark: '#000000', 
      colorLight: '#ffffff',
      correctLevel: QRCode.CorrectLevel.H,
    });
  } 
</script>
<style>
  .ticket-divider::before {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0%; 
    border-left: 2px dashed rgba(255, 255, 255, 0.4);
  }
</style>